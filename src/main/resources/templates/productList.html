<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>상품 조회</title>
    <style>
        body { font-family: '맑은 고딕', Arial, sans-serif; background: #f7f7f7; margin: 0; padding: 30px; }
        h1, h2 { color: #333; }
        form { margin-bottom: 30px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: inline-block; }
        label { margin-right: 10px; }
        input[type="text"] { padding: 6px 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 6px 16px; background: #1976d2; color: #fff; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px; }
        button:hover { background: #1565c0; }
        ul { list-style: none; padding: 0; }
        li { background: #fff; margin-bottom: 8px; padding: 12px; border-radius: 6px; box-shadow: 0 1px 4px rgba(0,0,0,0.04); }
        .not-found { color: #d32f2f; font-weight: bold; margin-top: 20px; }
        .product-info { background: #e3f2fd; padding: 16px; border-radius: 8px; margin-bottom: 20px; }
    </style>
</head>
<body>
<h1>상품 조회</h1>
<form action="/product" method="get">
    <label for="id">상품 ID:</label>
    <input type="text" id="id" name="id" th:value="${id}">
    <label for="name">상품명:</label>
    <input type="text" id="name" name="name" th:value="${name}">
    <button type="submit">조회</button>
</form>

<form action="/product/excel" method="get" style="display:inline-block;">
    <input type="hidden" name="id" th:value="${id}">
    <input type="hidden" name="name" th:value="${name}">
    <button type="submit">엑셀 다운로드</button>
</form>

<!-- id와 name 모두 입력된 경우 -->
<div th:if="${id != null and name != null and name != ''}">
    <h2>ID 또는 상품명 검색 결과</h2>
    <ul>
        <li th:each="p : ${products}">
            <span th:text="${p.id}"></span> - <span th:text="${p.name}"></span> (<span th:text="${p.price}"></span>원)
        </li>
    </ul>
    <div th:if="${products.size() == 0}" class="not-found">
        <p>검색 결과가 없습니다.</p>
    </div>
</div>

<!-- 상품 ID만 입력된 경우 -->
<div th:if="${id != null and (name == null or name == '')}">
    <div th:if="${product != null}" class="product-info">
        <h2>상품 정보</h2>
        <p>상품명: <span th:text="${product.name}"></span></p>
        <p>가격: <span th:text="${product.price}"></span>원</p>
    </div>
    <div th:if="${product == null}" class="not-found">
        <p>상품을 찾을 수 없습니다.</p>
    </div>
</div>

<!-- 상품명만 입력된 경우 -->
<div th:if="${id == null and name != null and name != ''}">
    <h2>상품명 검색 결과</h2>
    <ul>
        <li th:each="p : ${products}">
            <span th:text="${p.id}"></span> - <span th:text="${p.name}"></span> (<span th:text="${p.price}"></span>원)
        </li>
    </ul>
    <div th:if="${products.size() == 0}" class="not-found">
        <p>검색 결과가 없습니다.</p>
    </div>
</div>

<!-- 전체 목록 표시 -->
<div th:if="${id == null and (name == null or name == '')}">
    <h2>전체 상품 목록</h2>
    <ul>
        <li th:each="p : ${products}">
            <span th:text="${p.id}"></span> - <span th:text="${p.name}"></span> (<span th:text="${p.price}"></span>원)
        </li>
    </ul>
</div>
</body>
</html>